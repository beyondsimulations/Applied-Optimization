{
  "hash": "228471d7d396bbc176557d218107e45b",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Lecture V - Production Planning in Breweries\"\nsubtitle: \"Applied Optimization with Julia\"\nauthor: \"Dr. Tobias VlÄ‡ek\"\nformat:\n  revealjs:\n    footer: \" {{< meta title >}} | {{< meta author >}} | [Home](lecture-05-production.qmd)\"\n    output-file: lecture-05-presentation.html\n---\n\n# [Introduction]{.flow} {.title}\n\n\n\n## Case Study\n\n::: {.columns}\n::: {.column width=\"40%\"}\n[![](https://images.unsplash.com/photo-1719752486455-3c6809b5e238?q=80&w=3456&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D){width=\"90%\"}](https://unsplash.com/){width=\"85%\"}\n:::\n\n::: {.column width=\"60%\"}\n- **Large brewery**\n- Brews and sells beverages\n- Production planning by hand\n- Planner has a [lot of experience]{.highlight}\n- **But** will retire soon\n:::\n:::\n\n## Challenges\n\n::: {.columns}\n::: {.column width=\"40%\"}\n[![](https://images.unsplash.com/photo-1518542698889-ca82262f08d5?q=80&w=3687&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D){width=\"90%\"}](https://unsplash.com/){width=\"85%\"}\n:::\n\n::: {.column width=\"60%\"}\n- **Strong** competition\n- Customer **demand is changing**\n- Craft beer **gains popularity**\n- **Variety** of drinks is increasing\n- [Batch sizes are getting smaller]{.highlight}\n:::\n:::\n\n\n## Different costs\n\n::: {.columns}\n::: {.column width=\"40%\"}\n[![](https://images.unsplash.com/photo-1651475828382-1ffeea47739b?q=80&w=3000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D){width=\"90%\"}](https://unsplash.com/photos/a-large-industrial-machine-v-ySKssePQM){width=\"85%\"}\n:::\n\n::: {.column width=\"60%\"}\n\n- Plant can fill **multiple types**\n- Time depends on **type and batch**\n- **Changing type** leads to set-up costs for preparation and cleaning\n- **Unsold beer bottles** can be [stored in a warehouse]{.highlight}\n- This leads to **inventory costs**\n\n:::\n:::\n\n## {.loud-slide}\n::: {.r-fit-text}\nWhere is the\n\nchallenge?\n:::\n\n::: footer\n:::\n\n---\n\n# [Problem Structure]{.flow} {.title}\n\n## Objective\n\n::: {.columns}\n::: {.column width=\"40%\"}\n\n![](https://images.beyondsimulations.com/ao/ao_clsp_overview.png){width=\"60%\"}\n\n:::\n\n::: {.column width=\"60%\"}\n[Question:]{.question} **What could be the objective?**\n\n[Minimize the combined setup and inventory holding cost while satisfying the demand and adhering to the production capacity.]{.fragment}\n\n:::\n:::\n\n## Trade-Off\n\n::: {.columns}\n::: {.column width=\"40%\"}\n\n![](https://images.beyondsimulations.com/ao/ao_clsp_overview.png){width=\"60%\"}\n\n:::\n\n::: {.column width=\"60%\"}\n\n[Question:]{.question} **What is the trade-off?**\n\n[Larger batches require [less setup cost per bottle]{.highlight}, but increase the storage cost.]{.fragment}\n\n:::\n:::\n\n---\n\n## Available Sets\n\n[Question:]{.question} **What are sets again?**\n\n. . .\n\nSets are [collections of objects]{.highlight}.\n\n. . .\n\n[Question:]{.question} **What could be the sets here?**\n\n. . .\n\n- $\\mathcal{I}$ - Set of beer types indexed by $i \\in \\{1,2,...,|\\mathcal{I}|\\}$\n- $\\mathcal{T}$ - Set of time periods indexed by $t \\in \\{1,2,...,|\\mathcal{T}|\\}$\n\n\n## Available Parameters\n\n[Question:]{.question} **What are possible parameters?**\n\n. . .\n\n- $a_t$ - Available time on the bottling plant in period $t\\in\\mathcal{T}$\n- $b_i$ - Time used for bottling one unit of beer type $i\\in\\mathcal{I}$\n- $g_i$ - Setup time for beer type $i\\in\\mathcal{I}$\n- $f_i$ - Setup cost of beer type $i\\in\\mathcal{I}$\n- $c_i$ - Inventory holding cost for one unit of beer type $i\\in\\mathcal{I}$\n- $d_{i,t}$ - Demand of beer type $i\\in\\mathcal{I}$ in period $t\\in\\mathcal{T}$\n\n---\n\n## Decision Variables?\n\n::: {.callout-note}\n## We have the following sets:\n- Beer types indexed by $i \\in \\{1,2,...,|\\mathcal{I}|\\}$\n- Time periods of the planning horizon indexed by $t \\in \\{1,2,...,|\\mathcal{T}|\\}$\n:::\n\n. . .\n\n::: {.callout-important}\n## Our objective is to:\nMinimize the combined setup and inventory holding cost while satisfying the demand and adhering to the production capacity.\n:::\n\n. . .\n\n[Question:]{.question} **What could be our decision variable/s?**\n\n## Decision Variables\n\n- $W_{i,t}$ - Inventory of type $i\\in\\mathcal{I}$ at the end of $t\\in\\mathcal{T}$\n- $Y_{i,t}$ - 1, if type $i\\in\\mathcal{I}$ is bottled in $t\\in\\mathcal{T}$, 0 otherwise\n- $X_{i,t}$ - Batch size of type $i\\in\\mathcal{I}$ in $t\\in\\mathcal{T}$\n\n---\n\n# [Model Formulation]{.flow} {.title}\n\n## Objective Function?\n\n::: {.callout-important}\n## Our objective is to:\n\nMinimize the combined setup and inventory holding cost while satisfying the demand and adhering to the production capacity.\n:::\n\n. . .\n\n[Question:]{.question} **What could be our objective function?**\n\n. . .\n\n::: {.callout-note}\n## We need the following variables:\n\n- $W_{i,t}$ - Inventory of type $i\\in\\mathcal{I}$ at the end of $t\\in\\mathcal{T}$\n- $Y_{i,t}$ - 1, if type $i\\in\\mathcal{I}$ is bottled in $t\\in\\mathcal{T}$, 0 otherwise\n\n:::\n\n---\n\n## Objective Function\n\n::: {.callout-note}\n## We need the following parameters:\n\n- $f_i$ - Setup cost of beer type $i\\in\\mathcal{I}$\n- $c_i$ - Inventory holding cost for one unit of beer type $i\\in\\mathcal{I}$\n\n:::\n\n. . .\n\n$$\\text{Minimize} \\quad \\sum_{i=1}^{\\mathcal{I}} \\sum_{t=1}^{\\mathcal{T}} (c_i \\times W_{i,t} + f_i \\times Y_{i,t})$$\n\n---\n\n## Constraints\n\n::: {.columns}\n::: {.column width=\"40%\"}\n\n![](https://images.beyondsimulations.com/ao/ao_clsp_overview.png){width=\"60%\"}\n\n:::\n\n::: {.column width=\"60%\"}\n[Question:]{.question} **What constraints?**\n\n::: {.fragment}\n- Transfer **unused** inventory\n- **Fulfill** the customer demand\n- **Set up** beer types\n- Calculate the **batch size** per set-up\n- Compute **remaining** inventory\n- **Limit** the bottling plant\n\n:::\n:::\n:::\n\n---\n\n## Demand/Inventory Constraints?\n\n::: {.callout-important}\n## The goal of these constraints is to:\nConsider the current inventory and batch sizes and compute the remaining inventory.\n:::\n\n. . .\n\n::: {.callout-note}\n## We need the following variables and parameters:\n\n- $W_{i,t}$ - Inventory of beer type $i\\in\\mathcal{I}$ at the end of period $t\\in\\mathcal{T}$\n- $X_{i,t}$ - Batch size of beer type $i\\in\\mathcal{I}$ in $t\\in\\mathcal{T}$\n- $d_{i,t}$ - Demand of beer type $i\\in\\mathcal{I}$ in period $t\\in\\mathcal{T}$\n\n:::\n\n. . .\n\n[Question:]{.question} **What could the constraint look like?**\n\n## Demand/Inventory Constraints\n\n$$W_{i,t-1} + X_{i,t} - W_{i,t} = d_{i,t} \\quad \\forall i\\in\\mathcal{I},t\\in\\mathcal{T}|t>1$$\n\n. . .\n\n::: {.callout-note}\n## Remember, these are the variables and parameters:\n\n- $W_{i,t}$ - Inventory of beer type $i\\in\\mathcal{I}$ at the end of period $t\\in\\mathcal{T}$\n- $X_{i,t}$ - Batch size of beer type $i\\in\\mathcal{I}$ in $t\\in\\mathcal{T}$\n- $d_{i,t}$ - Demand of beer type $i\\in\\mathcal{I}$ in period $t\\in\\mathcal{T}$\n\n:::\n\n. . .\n\n[Question:]{.question} **What does $|t>1$ mean?**\n\n---\n\n## Setup Constraints?\n\n::: {.callout-important}\n## The goal of these constraints is to:\nSet up beer types where the batch size is $\\geq$ 0.\n:::\n\n. . .\n\n::: {.callout-note}\n## We need the following variables and parameters:\n\n- $Y_{i,t}$ - 1, if beer type $i\\in\\mathcal{I}$ is bottled in period $t\\in\\mathcal{T}$, 0 otherwise\n- $X_{i,t}$ - Batch size of beer type $i\\in\\mathcal{I}$ in $t\\in\\mathcal{T}$\n- $d_{i,t}$ - Demand of beer type $i\\in\\mathcal{I}$ in period $t\\in\\mathcal{T}$\n\n:::\n\n. . .\n\n[Question:]{.question} **What could the second constraint be?**\n\n## Setup Constraints\n\n$$X_{i,t} \\leq Y_{i,t} \\times \\sum_{\\tau=1}^{\\mathcal{T}} d_{i\\tau} \\quad \\forall i\\in\\mathcal{I},\\forall t\\in\\mathcal{T}$$\n\n. . .\n\n[Question:]{.question} **Do you know this type of constraint?**\n\n. . .\n\nThis type of constraint is called a **\"Big-M\"** constraint!\n\n. . .\n\n- **M** (here $\\sum_{\\tau=1}^{\\mathcal{T}} d_{i\\tau}$) is a large number\n- It is coupled with a binary variable (here $Y_{i,t}$)\n- [Like an if-then constraint]{.highlight}\n\n---\n\n## Capacity Constraints?\n\n::: {.callout-important}\n## The goal of these constraints is to:\nLimit the capacity of the bottling plant per period.\n:::\n\n. . .\n\n::: {.callout-note}\n## We need the following variables and parameters:\n\n- $Y_{i,t}$ - 1, if beer type $i\\in\\mathcal{I}$ is bottled in period $t\\in\\mathcal{T}$, 0 otherwise\n- $X_{i,t}$ - Batch size of beer type $i\\in\\mathcal{I}$ in $t\\in\\mathcal{T}$\n- $a_t$ - Available time on the bottling plant in period $t\\in\\mathcal{T}$\n- $b_i$ - Time used for bottling one unit of beer type $i\\in\\mathcal{I}$\n- $g_i$ - Setup time for beer type $i\\in\\mathcal{I}$\n\n:::\n\n## Capacity Constraints\n\n[Question:]{.question} **What could the third constraint be?**\n\nIt has more variables and parameters when compared to the other constraints but it is easier to understand.\n\n. . .\n\n$$\\sum_{i=1}^{\\mathcal{I}} (b_i \\times X_{i,t} + g_i \\times Y_{i,t}) \\leq a_t \\quad \\forall t\\in\\mathcal{T}$$\n\n. . .\n\n[And that's basically it!]{.highlight}\n\n---\n\n## CLSP: Objective Function\n\n$$\\text{Minimize} \\quad \\sum_{i \\in \\mathcal{I}} \\sum_{t \\in \\mathcal{T}} (c_i \\times W_{i,t} + f_i \\times Y_{i,t})$$\n\n::: {.callout-important}\n## The goal of the objective function is to:\n\nMinimize the combined setup and inventory holding cost while satisfying the demand and adhering to the production capacity.\n\n:::\n\n## CLSP: Constraints\n\n$$W_{i,t-1} + X_{i,t} - W_{i,t} = d_{i,t} \\quad \\forall i\\in\\mathcal{I},t\\in\\mathcal{T}|t>1$$\n\n$$X_{i,t} \\leq Y_{i,t} \\times \\sum_{\\tau \\in \\mathcal{T}} d_{i,\\tau} \\quad \\forall i\\in\\mathcal{I},\\forall t\\in\\mathcal{T}$$\n\n$$\\sum_{i \\in \\mathcal{I}} (b_i \\times X_{i,t} + g_i \\times Y_{i,t}) \\leq a_t \\quad \\forall t\\in\\mathcal{T}$$\n\n::: {.callout-important}\n## Our constraints ensure:\n\nDemand is met, inventory transferred, setup taken care of, and capacity respected.\n\n:::\n\n## CLSP: Variable Domains\n\n$$Y_{i,t}\\in\\{0,1\\} \\quad \\forall i\\in\\mathcal{I},t\\in\\mathcal{T}$$\n\n$$W_{i,t}, X_{i,t}\\geq 0 \\quad \\forall i\\in\\mathcal{I},t\\in\\mathcal{T}$$\n\n::: {.callout-important}\n## The variable domains make sure that:\n\nThe binary setup variable is either 0 or 1 and that the inventory and batch size are non-negative.\n\n:::\n\n---\n\n# [Model Characteristics]{.flow} {.title}\n\n## Recap on some Basics\n\nThere exist several types of optimization problems:\n\n::: {.incremental}\n\n- **Linear (LP):** Linear constraints and objective function\n- **Mixed-integer (MIP):** Linear constraints and objective function, but discrete variable domains\n- **Quadratic (QP):** Quadratic constraints and/or objective\n- **Non-linear (NLP):** Non-linear constraints and/or objective\n- [And more!]{.highlight}\n\n:::\n\n## Recap on Solution Algorithms\n\n::: {.incremental}\n\n- **Simplex algorithm** to solve LPs\n- **Branch & Bound** to solve MIPs\n- **Outer-Approximation** for mixed-integer NLPs\n- **Math-Heuristics** (e.g., Fix-and-Optimize, Tabu-Search, ...)\n- **Decomposition** methods (Lagrange, Benders, ...)\n- **Heuristics** (greedy, construction method, n-opt, ...)\n- **Graph theoretical methods** (network flow, shortest path)\n\n:::\n\n---\n\n## Model Characteristics\n\n[Questions:]{.question} **On model characteristics**\n\n::: {.incremental}\n\n- Is the model formulation linear/ non-linear?\n- What kind of variable domains do we have?\n- What kind of solver could we use?\n- Can the Big-M constraint be tightened?\n\n:::\n\n## Model Assumptions\n\n[Questions:]{.question} **On model assumptions**\n\n::: {.incremental}\n\n- What assumptions have we made?\n- What is the problem with the planning horizon?\n- Any idea how to solve it?\n\n:::\n\n---\n\n\n# [Impact]{.flow} {.title}\n\n## {.loud-slide}\n::: {.r-fit-text}\nCan this be\n\napplied?\n:::\n\n::: footer\n:::\n\n## [Scale as a Problem]{.invert-font} {background-color=\"#000000\" background-image=\"https://unsplash.com/photos/9EY5ckCX9iQ/download?ixid=M3wxMjA3fDB8MXxzZWFyY2h8M3x8YnJld2VyeXxlbnwwfHx8fDE3MzEwNjYwMTl8MA&force=true&w=2400\" background-size=\"cover\" background-position=\"center\"}\n\n[Solving the problem with commercial solvers is not feasible.]{.invert-font .fragment}\n\n::: footer\n:::\n\n## Scale of the Case Study\n\n- **220** finished products\n- **100** semi-finished products\n- **13** production resources\n- **8** storage resources\n- **3** main production levels\n- **52** weeks planning horizon\n\n\n## {.loud-slide}\n::: {.r-fit-text}\nAny idea what\n\ncould be done?\n:::\n\n::: footer\n:::\n\n## Heuristics and Optimization\n\n- Multi-level Capacitated Lot-Sizing Problem\n- Heuristic fix and optimize approach [^1]\n- Operating cost reduction by 5% and planning effort by 40%\n\n. . .\n\n\n::: {.callout-note}\n## And that's it for todays lecture!\n\nWe now have covered the basics of the CLSP and are ready to start solving some tasks in the upcoming tutorial.\n:::\n\n[^1]: @mickein2022decision\n\n## {.loud-slide}\n::: {.r-fit-text}\nQuestions?\n:::\n\n::: footer\n:::\n\n---\n\n# [Literature]{.flow} {.title}\n\n\n## Literature I\n\nFor more interesting literature to learn more about Julia, take a look at the [literature list](../general/literature.qmd) of this course.\n\n## Literature II\n\n",
    "supporting": [
      "lecture-05-production_files/figure-revealjs"
    ],
    "filters": [],
    "includes": {}
  }
}