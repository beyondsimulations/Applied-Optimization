{
  "hash": "7019a4c4143f387c5e3d7b23d241e783",
  "result": {
    "engine": "julia",
    "markdown": "---\ntitle: \"Tutorial IV.III - Constraints in JuMP\"\nsubtitle: \"Applied Optimization with Julia\"\n\nformat:\n    html:\n        theme: litera\n        highlight-style: arrow\n        linkcolor: \"#a60000\"\n        code-copy: true\n        code-link: true\n        toc: true\n        toc-location: right\n        code-overflow: wrap\n    pdf: \n        documentclass: report\n        geometry:\n            - margin=1in\n        fontfamily: roboto\n        fontfamilyoptions: sfdefault\n        colorlinks: true\n\n    ipynb:\n        code-copy: true\n        code-overflow: wrap\n        \nengine: julia\n---\n\n\n\n\n\n\n\n\n# Introduction\n\nWelcome to this tutorial on constraints in JuMP! In this lesson, we'll explore how to add rules (constraints) to our optimization problems.\n\nBy the end of this tutorial, you'll be able to:\n1. Create simple constraints for your optimization problems\n2. Use containers (like arrays) to manage multiple similar constraints\n3. Create more complex constraints based on conditions\n\nLet's start by loading the necessary packages:\n\n\n\n\n\n\n\n\n::: {#2 .cell execution_count=1}\n``` {.julia .cell-code}\nusing JuMP, HiGHS\n```\n:::\n\n\n\n\n\n\n\n\n\n\nNow, let's create a model that we'll use throughout this tutorial:\n\n\n\n\n\n\n\n\n::: {#4 .cell execution_count=1}\n``` {.julia .cell-code}\nmodel = Model(HiGHS.Optimizer)\nprintln(\"Great! We've created a new optimization model.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGreat! We've created a new optimization model.\n```\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n# Section 1 - Objective Functions with Container Variables\n\nDefining objective functions with variables in containers allows for scalable and dynamic model formulations. First, we need a container with variables for the objective function. For example:\n\n```julia\n@variable(modelName, variableName[1:3] >= 0)\n```\n\nNow, we can define an objective function with the container. For example:\n\n```julia\n@objective(modelName, Max, sum(variableName[i] for i in 1:3))\n```\n\n## Exercise 1.1 - Define arrays\n\nScenario: Imagine you're optimizing the production of 8 different products in a factory. Each product has a different profit margin, and you want to maximize total profit.\n\nDefine an array of variables and an objective function for `another_model`. The variables should be called `profits` and have a range from `1:8`. It has a lower bound of `0`. The objective should be a Maximization of the sum of all `profits`.\n\n\n\n\n\n\n\n\n::: {#6 .cell execution_count=0}\n``` {.julia .cell-code}\n# YOUR CODE BELOW\n\n```\n:::\n\n\n\n::: {#8 .cell execution_count=0}\n``` {.julia .cell-code code-fold=\"true\"}\n# Test your answer\n@assert length(profits) == 8 && all(lower_bound(profits[i]) == 0 for i in 1:8)\n@assert typeof(objective_function(another_model)) == AffExpr\nprintln(\"Objective function with container variables defined successfully!\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Section 2 - Constraints within Containers\n\nDefining constraints within containers allows for structured and easily manageable models. This is especially important when models become larger! To define a constraint within a container, we can do, for example, the following:\n\n```julia\n@constraint(modelName, \n    constraintName[i in 1:3], \n    variableName[i] <= 100\n)\n```\n\nThis would create a constraint called `constraintName` for each `i` - thus `1`,`2`, and `3` - where `variableName[1]`, `variableName[2]`, and `variableName[3]` are restricted to be maximally `100`.\n\n# Exercise 2.1 - Define constraints\n\nContinuing our factory scenario: Each product has a maximum daily production capacity due to machine limitations.\n\nDefine constraints called `maxProfit` using an array of variables. The logic: Each profit defined in the previous task should be less than or equal to `12`.\n\n\n\n\n\n\n\n\n::: {#10 .cell execution_count=0}\n``` {.julia .cell-code}\n# YOUR CODE BELOW\n\n```\n:::\n\n\n\n::: {#12 .cell execution_count=0}\n``` {.julia .cell-code code-fold=\"true\"}\n# Test your answer\n@assert all(is_valid(another_model, maxProfit[i]) for i in 1:8)\nprintln(\"Constraints within containers defined successfully!\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Section 3 - Implementing Conditional Constraints\n\nConditional constraints are added to the model based on certain conditions, allowing for dynamic and flexible model formulations. To define a constraint within a container under conditions, we can do the following:\n\n```julia\n@constraint(modelName, \n    constraintName[i in 1:3; i <= 2], \n    variableName[i] <= 50\n)\n```\n\nThis would create a constraint called `constraintName` for each `i` - thus `1`,`2`, and `3` - where `variableName[1]`, `variableName[2]` are restricted to be maximally `50` and `variableName[3]` was not restricted.\n\n## Exercise 3.1 - Add a conditional constraints\n\nScenario extension: The first 4 products are new and have limited market demand.\n\nAdd a conditional constraint `smallProfit` to the previous model. Condition: Only the first 4 variables profit have to be lower than 5.\n\n\n\n\n\n\n\n\n::: {#14 .cell execution_count=0}\n``` {.julia .cell-code}\n# YOUR CODE BELOW\n\n```\n:::\n\n\n\n::: {#16 .cell execution_count=0}\n``` {.julia .cell-code code-fold=\"true\"}\n# Test your answer\n@assert all(is_valid(another_model, smallProfit[i]) for i in 1:4)\nprintln(\"Conditional constraint implemented successfully!\")\nprintln(\"Checking successful implementation.\")\noptimize!(another_model)\nstatus = termination_status(another_model)\n@assert status == MOI.OPTIMAL \"Sorry, something didn't work out as the model status is $status\"\n@assert objective_value(another_model) â‰ˆ 68 atol=1e-4 \"Although you have an optimal solution, \n    the should be 68 not $(objective_value(another_model)). Is the model correct?\"\nprintln(\"Model components validated successfully!\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Visualization of Results\n\nLet's visualize our optimal solution:\n\n\n\n\n\n\n\n\n::: {#18 .cell execution_count=0}\n``` {.julia .cell-code}\nusing Plots\n# Assuming the model has been solved!!!\noptimal_profits = value.(profits)\n\nbar(1:8, optimal_profits, \n    title=\"Optimal Production Levels\", \n    xlabel=\"Product\", \n    ylabel=\"Profit\", \n    legend=false)\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Conclusion\n\nCongratulations! You've completed the tutorial on advanced handling of objective functions and constraints in JuMP. You've learned how to define objective functions and constraints using container variables. Continue to the next file to learn more.\n\n---\njupyter:\n  kernelspec:\n    display_name: Julia\n    name: julia\n    language: julia\n  kernel_info:\n    name: julia\n  language_info:\n    name: julia\n    version: 1.10.5\n    codemirror_mode: julia\n---\n",
    "supporting": [
      "tutorial-04-03-constraints_files/figure-ipynb"
    ],
    "filters": []
  }
}