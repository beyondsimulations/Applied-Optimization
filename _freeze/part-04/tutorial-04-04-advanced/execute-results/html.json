{
  "hash": "84a0c28d0db8b9e1de9b4f75df4658b0",
  "result": {
    "engine": "julia",
    "markdown": "---\ntitle: \"Tutorial IV.IV - Advanced Solver Options with HiGHS in JuMP\"\nsubtitle: \"Applied Optimization with Julia\"\n\nformat:\n    html:\n        theme: litera\n        highlight-style: arrow\n        linkcolor: \"#a60000\"\n        code-copy: true\n        code-link: true\n        toc: true\n        toc-location: right\n        code-overflow: wrap\n    pdf: \n        documentclass: report\n        geometry:\n            - margin=1in\n        fontfamily: roboto\n        fontfamilyoptions: sfdefault\n        colorlinks: true\n    ipynb:\n        code-copy: true\n        code-overflow: wrap\nengine: julia\n---\n\n\n\n\n\n\n\n\n# Introduction\n\nWelcome to this tutorial on advanced solver options in JuMP using the HiGHS solver! Don't worry if \"advanced solver options\" sounds intimidating - we'll break everything down into simple, easy-to-understand concepts.\n\nImagine you're using a GPS app to find the best route to a new restaurant. Just like how you can adjust settings in your GPS (like avoiding toll roads or preferring highways), we can adjust settings in our optimization solver to help it find solutions more efficiently or to meet specific requirements.\n\nBy the end of this tutorial, you'll be able to:\n1. Understand what solver options are and why they're useful\n2. Set basic solver options like time limits and solution tolerances\n3. Interpret solver output to understand how well your problem was solved\n\nLet's start by loading the necessary packages:\n\n\n\n\n\n\n\n\n::: {#2 .cell execution_count=1}\n``` {.julia .cell-code}\nusing JuMP, HiGHS\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Section 1: Understanding Solver Options\n\nSolver options are like the \"advanced settings\" of our optimization tool. They allow us to control how the solver approaches our problem. Here are a few common options:\n\n1. **Time limit**: How long the solver should try before giving up\n2. **Solution tolerance**: How precise we need the answer to be\n3. **Presolve**: Whether to simplify the problem before solving it\n\nLet's create a model and set some of these options:\n\n\n\n\n\n\n\n\n::: {#4 .cell execution_count=1}\n``` {.julia .cell-code}\nmodel = Model(HiGHS.Optimizer)\n\n# Set a time limit of 60 seconds\nset_time_limit_sec(model, 60)\n\n# Set the relative MIP gap tolerance to 1%\nset_optimizer_attribute(model, \"mip_rel_gap\", 0.01)\n\n# Turn on presolve\nset_optimizer_attribute(model, \"presolve\", \"on\")\n\nprintln(\"Solver options set successfully!\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSolver options set successfully!\n```\n:::\n:::\n\n\n\n\n\n\n\n\n\n\nLet's break this down:\n\n- `set_time_limit_sec(model, 60)` tells the solver to stop after 60 seconds if it hasn't found a solution\n- `set_optimizer_attribute(model, \"mip_rel_gap\", 0.01)` sets how close to the best possible solution we need to be (within 1%)\n- `set_optimizer_attribute(model, \"presolve\", \"on\")` tells the solver to try simplifying the problem first\n\n## Exercise 1.1 - Set Solver Options\n\nNow it's your turn! Set the following solver options:\n1. A time limit of 120 seconds\n2. A MIP gap tolerance of 0.5%\n3. Turn off presolve\n\n\n\n\n\n\n\n\n::: {#6 .cell execution_count=1}\n``` {.julia .cell-code}\n# YOUR CODE BELOW\n\n```\n:::\n\n\n\n::: {#8 .cell execution_count=0}\n``` {.julia .cell-code code-fold=\"true\"}\n# Test your answer\n@assert time_limit_sec(model) == 120 \"The time limit should be 120 seconds but is $(time_limit_sec(model))\"\n@assert solver_name(model) == \"HiGHS\" \"The solver should be HiGHS but is $(solver_name(model))\"\n@assert MOI.get(model, MOI.RawOptimizerAttribute(\"mip_rel_gap\")) == 0.005 \"The MIP gap should be 0.5% but is $(MOI.get(model, MOI.RawOptimizerAttribute(\"mip_rel_gap\")))\"\n@assert MOI.get(model, MOI.RawOptimizerAttribute(\"presolve\")) == \"off\" \"Presolve should be off but is $(MOI.get(model, MOI.RawOptimizerAttribute(\"presolve\")))\"\nprintln(\"Great job! You've successfully set advanced solver options.\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Section 2: Creating and Solving a Sample Problem\n\nTo see how these options affect solving, let's create a simple optimization problem. We'll use a basic production planning scenario.\n\nImagine you're managing a small factory that produces two types of products: widgets and gadgets. You want to maximize profit while staying within your production capacity.\n\n\n\n\n\n\n\n\n::: {#10 .cell execution_count=1}\n``` {.julia .cell-code}\n# Define variables\n@variable(model, widgets >= 0, Int) \n@variable(model, gadgets >= 0, Int)\n\n# Define constraints\n@constraint(model, \n    production_time, \n    2*widgets + 3*gadgets <= 240\n) \n@constraint(model, \n    widget_demand, \n    widgets <= 80\n)  \n@constraint(model, \n    gadget_demand, \n    gadgets <= 60\n)\n\n# Define objective (profit)\n@objective(model, \n    Max, \n    25*widgets + 30*gadgets\n)\n\n# Solve the problem\noptimize!(model)\n\n# Print results\nprintln(\"Optimization status: \", termination_status(model))\nprintln(\"Objective value: \", objective_value(model))\nprintln(\"Widgets to produce: \", value(widgets))\nprintln(\"Gadgets to produce: \", value(gadgets))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRunning HiGHS 1.7.2 (git hash: 5ce7a2753): Copyright (c) 2024 HiGHS under MIT licence terms\nCoefficient ranges:\n  Matrix [1e+00, 3e+00]\n  Cost   [2e+01, 3e+01]\n  Bound  [0e+00, 0e+00]\n  RHS    [6e+01, 2e+02]\nPresolving model\n1 rows, 2 cols, 2 nonzeros  0s\n1 rows, 2 cols, 2 nonzeros  0s\nObjective function is integral with scale 0.2\n\nSolving MIP model with:\n   1 rows\n   2 cols (0 binary, 2 integer, 0 implied int., 0 continuous)\n   2 nonzeros\n\n        Nodes      |    B&B Tree     |            Objective Bounds              |  Dynamic Constraints |       Work      \n     Proc. InQueue |  Leaves   Expl. | BestBound       BestSol              Gap |   Cuts   InLp Confl. | LpIters     Time\n\n         0       0         0   0.00%   3800            -inf                 inf        0      0      0         0     0.0s\n S       0       0         0   0.00%   3800            2780              36.69%        0      0      0         0     0.0s\n\nSolving report\n  Status            Optimal\n  Primal bound      2780\n  Dual bound        2800\n  Gap               0.719% (tolerance: 1%)\n  Solution status   feasible\n                    2780 (objective)\n                    0 (bound viol.)\n                    0 (int. viol.)\n                    0 (row viol.)\n  Timing            0.00 (total)\n                    0.00 (presolve)\n                    0.00 (postsolve)\n  Nodes             1\n  LP iterations     1 (total)\n                    0 (strong br.)\n                    0 (separation)\n                    0 (heuristics)\nOptimization status: OPTIMAL\nObjective value: 2780.0\nWidgets to produce: 80.0\nGadgets to produce: 26.0\n```\n:::\n:::\n\n\n\n\n\n\n\n\n\n\nThis problem determines how many widgets and gadgets to produce to maximize profit, given time constraints and maximum demand.\n\n## Exercise 2.1 - Modify and Solve the Problem\n\nNow it's your turn! Modify the problem above by:\n\n1. Changing the production time constraint to 300 minutes\n2. Increasing the profit for widgets to 30\n3. Solving the modified problem and printing the results\n\n\n\n\n\n\n\n\n::: {#12 .cell execution_count=0}\n``` {.julia .cell-code}\n# YOUR CODE BELOW\n# Hint: Copy the code above and make the necessary changes\nmodel = Model(HiGHS.Optimizer) # Don't forget to re-initialize the model\n\n```\n:::\n\n\n\n::: {#14 .cell execution_count=0}\n``` {.julia .cell-code code-fold=\"true\"}\n# Test your answer\n@assert termination_status(model) == MOI.OPTIMAL \"The termination status should be OPTIMAL but is $(termination_status(model))\"\n@assert isapprox(objective_value(model), 3780, atol=1e-6) \"The objective value should be 3780 but is $(objective_value(model))\"\n@assert isapprox(value(widgets), 80, atol=1e-6) \"The number of widgets to produce should be 80 but is $(value(widgets))\"\n@assert isapprox(value(gadgets), 46, atol=1e-6) \"The number of gadgets to produce should be 46 but is $(value(gadgets))\"\nprintln(\"Excellent work! You've successfully modified and solved the optimization problem.\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n# Section 3: Interpreting Solver Output\n\nWhen we solve an optimization problem, the solver gives us information about how it went. Let's look at some key pieces of information:\n\n\n\n\n\n\n\n\n::: {#16 .cell execution_count=0}\n``` {.julia .cell-code}\nprintln(\"Termination status: \", termination_status(model))\nprintln(\"Primal status: \", primal_status(model))\nprintln(\"Dual status: \", dual_status(model))\nprintln(\"Objective value: \", objective_value(model))\nprintln(\"Solve time: \", solve_time(model))\n```\n:::\n\n\n\n\n\n\n\n\n\n\nLet's break this down:\n\n- **Termination status**: Tells if the solver found an optimal solution, ran out of time, etc.\n- **Primal status**: Indicates if we have a valid solution for our original problem\n- **Dual status**: Relates to the mathematical properties of the solution (don't worry too much about this)\n- **Objective value**: The value of our objective function (in this case, our profit)\n- **Solve time**: How long it took to solve the problem\n\n# Conclusion\n\nWell done! You've completed the tutorial on advanced solver options with HiGHS in JuMP. You've learned how to set advanced solver options. Continue to the next file to learn more.\n\n\n# Solutions\n\nYou will likely find solutions to most exercises online. However, I strongly encourage you to work on these exercises independently without searching explicitly for the exact answers to the exercises. Understanding someone else's solution is very different from developing your own. Use the lecture notes and try to solve the exercises on your own. This approach will significantly enhance your learning and problem-solving skills.\n\nRemember, the goal is not just to complete the exercises, but to understand the concepts and improve your programming abilities. If you encounter difficulties, review the lecture materials, experiment with different approaches, and don't hesitate to ask for clarification during class discussions.\n\nLater, you will find the solutions to these exercises online in the associated GitHub repository, but we will also quickly go over them in next week's tutorial. To access the solutions, click on the Github button on the lower right and search for the folder with today's lecture and tutorial. Alternatively, you can ask ChatGPT or Claude to explain them to you. But please remember, the goal is not just to complete the exercises, but to understand the concepts and improve your programming abilities.\n\n",
    "supporting": [
      "tutorial-04-04-advanced_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}